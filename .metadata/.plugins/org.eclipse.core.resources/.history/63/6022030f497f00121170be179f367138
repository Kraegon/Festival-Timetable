import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class InputListener implements ActionListener{
	private JFrame frame;
	private JComponent[] comps;
	private String target;
	/**
	 * Constructor for the InputListerener to 
	 * @param frame : To be closed at the end of execution.
	 * @param comps : Components to read out.
	 */
	public InputListener(JFrame frame, JComponent[] comps, String target){
		this.frame = frame;
		this.comps = comps;
		this.target = target;
	}
	
	public void actionPerformed(ActionEvent arg0) {
		Object[] inputDetails = new Object[4];
		int counter = 0;
		for(int i = 0; i < comps.length; i++){
			if(comps[i].getClass() == JTextField.class){
				JTextField compTemp = (JTextField) comps[i];
				inputDetails[counter] = compTemp.getText();
				counter++;
			} 
			if(comps[i].getClass() == JCheckBox.class){
				JCheckBox compTemp = (JCheckBox) comps[i];
				inputDetails[counter] = compTemp.isSelected();
				counter++;
			}
		}
		switch(target){
			case "artist": 
				String nameA = (String) inputDetails[0];
				String genreA = (String) inputDetails[1];
				String miscA = (String) inputDetails[2];
				IO.getInstance().getFestival().addArtist(new Artist(nameA,genreA,miscA));
				break;
			case "stage": 
				String nameS = (String) inputDetails[0];
				int maxVisitorsS = Integer.parseInt((String) inputDetails[1]);
				boolean isMainStageS = (boolean) inputDetails[2];
				IO.getInstance().getFestival().addStage(new Stage(nameS, maxVisitorsS, isMainStageS));
				break;
			case "performance": 
				float startTime = (float) inputDetails[0];
				float endTime = (float) inputDetails[1];
				int popularity = (int) inputDetails[2];
				Stage stage = (Stage) inputDetails[3];
				IO.getInstance().getFestival().addPerformance(new Performance(startTime,endTime,popularity,stage));
				break;
		}
		
		frame.dispose();
	}
}